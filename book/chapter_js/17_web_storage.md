# ğŸ‘© Bá»™ Nhá»› Web

## Bá»™ Nhá»› Web HTML5

Bá»™ nhá»› Web (sessionStorage vÃ  localStorage) lÃ  má»™t API HTML5 má»›i cung cáº¥p nhá»¯ng lá»£i Ã­ch quan trá»ng so vá»›i cookie truyá»n thá»‘ng. TrÆ°á»›c HTML5, dá»¯ liá»‡u á»©ng dá»¥ng pháº£i Ä‘Æ°á»£c lÆ°u trá»¯ trong cookie, Ä‘Æ°á»£c bao gá»“m trong má»—i yÃªu cáº§u Ä‘áº¿n mÃ¡y chá»§. Bá»™ nhá»› Web an toÃ n hÆ¡n vÃ  cho phÃ©p lÆ°u trá»¯ má»™t lÆ°á»£ng lá»›n dá»¯ liá»‡u cá»¥c bá»™ mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t cá»§a trang web. Giá»›i háº¡n lÆ°u trá»¯ dá»¯ liá»‡u cá»§a cookie trong nhiá»u trÃ¬nh duyá»‡t web lÃ  khoáº£ng 4 KB má»—i cookie. Bá»™ nhá»› Web cÃ³ thá»ƒ lÆ°u trá»¯ dá»¯ liá»‡u lá»›n hÆ¡n nhiá»u (Ã­t nháº¥t lÃ  5MB) vÃ  khÃ´ng bao giá» Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n mÃ¡y chá»§. Táº¥t cáº£ cÃ¡c trang tá»« cÃ¹ng má»™t nguá»“n cÃ³ thá»ƒ lÆ°u trá»¯ vÃ  truy cáº­p cÃ¹ng má»™t dá»¯ liá»‡u.

Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p báº±ng JavaScript, giÃºp báº¡n táº­n dá»¥ng kháº£ nÄƒng láº­p trÃ¬nh phÃ­a client Ä‘á»ƒ thá»±c hiá»‡n nhiá»u Ä‘iá»u truyá»n thá»‘ng liÃªn quan Ä‘áº¿n láº­p trÃ¬nh phÃ­a mÃ¡y chá»§ vÃ  cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡. CÃ³ hai Ä‘á»‘i tÆ°á»£ng Bá»™ Nhá»› Web:

- sessionStorage
- localStorage

localStorage tÆ°Æ¡ng tá»± nhÆ° sessionStorage, ngoáº¡i trá»« viá»‡c dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong localStorage khÃ´ng cÃ³ thá»i gian háº¿t háº¡n, dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong sessionStorage sáº½ bá»‹ xÃ³a khi phiÃªn trang káº¿t thÃºc â€” tá»©c lÃ  khi trang Ä‘Æ°á»£c Ä‘Ã³ng.

Cáº§n lÆ°u Ã½ ráº±ng dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong cáº£ localStorage hoáº·c sessionStorage Ä‘á»u Ä‘áº·c thÃ¹ cho giao thá»©c cá»§a trang.

CÃ¡c khÃ³a vÃ  giÃ¡ trá»‹ luÃ´n lÃ  chuá»—i (lÆ°u Ã½ ráº±ng, nhÆ° vá»›i Ä‘á»‘i tÆ°á»£ng, cÃ¡c khÃ³a sá»‘ nguyÃªn sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh chuá»—i).

![web_storage](../images/web_storage.png)

### sessionStorage

sessionStorage chá»‰ kháº£ dá»¥ng trong tab trÃ¬nh duyá»‡t hoáº·c phiÃªn cá»­a sá»•. NÃ³ Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u trong má»™t phiÃªn trang web duy nháº¥t. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  náº¿u cá»­a sá»• bá»‹ Ä‘Ã³ng, dá»¯ liá»‡u phiÃªn sáº½ bá»‹ xÃ³a. VÃ¬ sessionStorage vÃ  localStorage cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c tÆ°Æ¡ng tá»±, chÃºng ta sáº½ táº­p trung vÃ o localStorage.

### localStorage

HTML5 localStorage lÃ  má»™t pháº§n cá»§a API bá»™ nhá»› web Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u trÃªn trÃ¬nh duyá»‡t mÃ  khÃ´ng cÃ³ ngÃ y háº¿t háº¡n. Dá»¯ liá»‡u sáº½ cÃ³ sáºµn trÃªn trÃ¬nh duyá»‡t ngay cáº£ khi trÃ¬nh duyá»‡t bá»‹ Ä‘Ã³ng. localStorage Ä‘Æ°á»£c giá»¯ ngay cáº£ giá»¯a cÃ¡c phiÃªn trÃ¬nh duyá»‡t. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  dá»¯ liá»‡u váº«n cÃ³ sáºµn khi trÃ¬nh duyá»‡t bá»‹ Ä‘Ã³ng vÃ  má»Ÿ láº¡i, vÃ  cÅ©ng ngay láº­p tá»©c giá»¯a cÃ¡c tab vÃ  cá»­a sá»•.

Dá»¯ liá»‡u Bá»™ Nhá»› Web, trong cáº£ hai trÆ°á»ng há»£p, khÃ´ng kháº£ dá»¥ng giá»¯a cÃ¡c trÃ¬nh duyá»‡t khÃ¡c nhau. VÃ­ dá»¥, cÃ¡c Ä‘á»‘i tÆ°á»£ng lÆ°u trá»¯ Ä‘Æ°á»£c táº¡o trong Firefox khÃ´ng thá»ƒ truy cáº­p trong Internet Explorer, giá»‘ng nhÆ° cookie. CÃ³ nÄƒm phÆ°Æ¡ng thá»©c Ä‘á»ƒ lÃ m viá»‡c trÃªn bá»™ nhá»› cá»¥c bá»™: _setItem(), getItem(), removeItem(), clear(), key()_

### TrÆ°á»ng Há»£p Sá»­ Dá»¥ng Bá»™ Nhá»› Web

Má»™t sá»‘ trÆ°á»ng há»£p sá»­ dá»¥ng Bá»™ Nhá»› Web lÃ 

- lÆ°u trá»¯ dá»¯ liá»‡u táº¡m thá»i
- lÆ°u cÃ¡c sáº£n pháº©m mÃ  ngÆ°á»i dÃ¹ng Ä‘áº·t trong giá» hÃ ng cá»§a há»
- dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c lÃ m sáºµn giá»¯a cÃ¡c yÃªu cáº§u trang, nhiá»u tab trÃ¬nh duyá»‡t vÃ  cÅ©ng giá»¯a cÃ¡c phiÃªn trÃ¬nh duyá»‡t sá»­ dá»¥ng localStorage
- cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng hoÃ n toÃ n offline sá»­ dá»¥ng localStorage
- Bá»™ Nhá»› Web cÃ³ thá»ƒ lÃ  má»™t chiáº¿n tháº¯ng hiá»‡u suáº¥t lá»›n khi má»™t sá»‘ dá»¯ liá»‡u tÄ©nh Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn client Ä‘á»ƒ giáº£m sá»‘ lÆ°á»£ng yÃªu cáº§u tiáº¿p theo. Ngay cáº£ hÃ¬nh áº£nh cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c lÆ°u trá»¯ dÆ°á»›i dáº¡ng chuá»—i sá»­ dá»¥ng mÃ£ hÃ³a Base64.
- cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng cho phÆ°Æ¡ng thá»©c xÃ¡c thá»±c ngÆ°á»i dÃ¹ng

Äá»‘i vá»›i cÃ¡c vÃ­ dá»¥ Ä‘Æ°á»£c Ä‘á» cáº­p á»Ÿ trÃªn, cÃ³ Ã½ nghÄ©a sá»­ dá»¥ng localStorage. Báº¡n cÃ³ thá»ƒ tháº¯c máº¯c, váº­y khi nÃ o nÃªn sá»­ dá»¥ng sessionStorage.

Trong nhá»¯ng trÆ°á»ng há»£p chÃºng ta muá»‘n xÃ³a dá»¯ liá»‡u ngay khi cá»­a sá»• bá»‹ Ä‘Ã³ng. Hoáº·c, cÃ³ thá»ƒ, náº¿u chÃºng ta khÃ´ng muá»‘n á»©ng dá»¥ng can thiá»‡p vÃ o cÃ¹ng á»©ng dá»¥ng Ä‘Æ°á»£c má»Ÿ trong má»™t cá»­a sá»• khÃ¡c. Nhá»¯ng tÃ¬nh huá»‘ng nÃ y Ä‘Æ°á»£c phá»¥c vá»¥ tá»‘t nháº¥t vá»›i sessionStorage.

BÃ¢y giá», chÃºng ta hÃ£y xem cÃ¡ch sá»­ dá»¥ng cÃ¡c API Bá»™ Nhá»› Web nÃ y.

## Äá»‘i TÆ°á»£ng Bá»™ Nhá»› Web HTML5

Bá»™ nhá»› web HTML cung cáº¥p hai Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u trÃªn client:

- window.localStorage - lÆ°u trá»¯ dá»¯ liá»‡u khÃ´ng cÃ³ ngÃ y háº¿t háº¡n
- window.sessionStorage - lÆ°u trá»¯ dá»¯ liá»‡u cho má»™t phiÃªn (dá»¯ liá»‡u sáº½ máº¥t khi tab trÃ¬nh duyá»‡t bá»‹ Ä‘Ã³ng)

Háº§u háº¿t cÃ¡c trÃ¬nh duyá»‡t hiá»‡n Ä‘áº¡i Ä‘á»u há»— trá»£ Bá»™ Nhá»› Web, tuy nhiÃªn, nÃªn kiá»ƒm tra há»— trá»£ trÃ¬nh duyá»‡t cho localStorage vÃ  sessionStorage. HÃ£y cÃ¹ng xem cÃ¡c phÆ°Æ¡ng thá»©c cÃ³ sáºµn cho cÃ¡c Ä‘á»‘i tÆ°á»£ng Bá»™ Nhá»› Web.

CÃ¡c Ä‘á»‘i tÆ°á»£ng Bá»™ Nhá»› Web:

- _localStorage_ - Ä‘á»ƒ hiá»ƒn thá»‹ Ä‘á»‘i tÆ°á»£ng localStorage
- _localStorage.clear()_ - Ä‘á»ƒ xÃ³a má»i thá»© trong bá»™ nhá»› cá»¥c bá»™
- _localStorage.setItem()_ - Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u trong localStorage. NÃ³ nháº­n cÃ¡c tham sá»‘ lÃ  khÃ³a vÃ  giÃ¡ trá»‹.
- _localStorage.getItem()_ - Ä‘á»ƒ hiá»ƒn thá»‹ dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong localStorage. NÃ³ nháº­n má»™t khÃ³a lÃ m tham sá»‘.
- _localStorage.removeItem()_ - Ä‘á»ƒ xÃ³a má»¥c Ä‘Ã£ lÆ°u trá»¯ khá»i localStorage. NÃ³ nháº­n khÃ³a lÃ m tham sá»‘.
- _localStorage.key()_ - Ä‘á»ƒ hiá»ƒn thá»‹ má»™t dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong localStorage. NÃ³ nháº­n chá»‰ má»¥c lÃ m tham sá»‘.

![local_storage](../images/local_storage.png)

### LÆ°u trá»¯ má»¥c vÃ o localStorage

Khi chÃºng ta lÆ°u trá»¯ dá»¯ liá»‡u vÃ o localStorage, nÃ³ sáº½ Ä‘Æ°á»£c lÆ°u trá»¯ dÆ°á»›i dáº¡ng chuá»—i. Náº¿u chÃºng ta lÆ°u trá»¯ má»™t máº£ng hoáº·c má»™t Ä‘á»‘i tÆ°á»£ng, chÃºng ta nÃªn chuyá»ƒn nÃ³ thÃ nh chuá»—i trÆ°á»›c Ä‘á»ƒ giá»¯ nguyÃªn Ä‘á»‹nh dáº¡ng náº¿u khÃ´ng chÃºng ta sáº½ máº¥t cáº¥u trÃºc máº£ng hoáº·c Ä‘á»‘i tÆ°á»£ng cá»§a dá»¯ liá»‡u gá»‘c.

ChÃºng ta lÆ°u trá»¯ dá»¯ liá»‡u trong localStorage báº±ng phÆ°Æ¡ng thá»©c _localStorage.setItem_.

```js
//cÃº phÃ¡p
localStorage.setItem('key', 'value')
```

- LÆ°u trá»¯ chuá»—i trong localStorage

```js
localStorage.setItem('firstName', 'Asabeneh') // vÃ¬ giÃ¡ trá»‹ lÃ  chuá»—i nÃªn chÃºng ta khÃ´ng cáº§n chuyá»ƒn nÃ³ thÃ nh chuá»—i
console.log(localStorage)
```

```sh
Storage {firstName: 'Asabeneh', length: 1}
```

- LÆ°u trá»¯ sá»‘ trong localStorage

```js
localStorage.setItem('age', 200)
console.log(localStorage)
```

```sh
 Storage {age: '200', firstName: 'Asabeneh', length: 2}
```

- LÆ°u trá»¯ má»™t máº£ng trong localStorage. Náº¿u chÃºng ta lÆ°u trá»¯ má»™t máº£ng, má»™t Ä‘á»‘i tÆ°á»£ng hoáº·c máº£ng Ä‘á»‘i tÆ°á»£ng, chÃºng ta nÃªn chuyá»ƒn Ä‘á»•i Ä‘á»‘i tÆ°á»£ng thÃ nh chuá»—i trÆ°á»›c. Xem vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y.

```js
const skills = ['HTML', 'CSS', 'JS', 'React']
//Máº£ng ká»¹ nÄƒng pháº£i Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh chuá»—i trÆ°á»›c Ä‘á»ƒ giá»¯ nguyÃªn Ä‘á»‹nh dáº¡ng.
const skillsJSON = JSON.stringify(skills, undefined, 4)
localStorage.setItem('skills', skillsJSON)
console.log(localStorage)
```

```sh
Storage {age: '200', firstName: 'Asabeneh', skills: 'HTML,CSS,JS,React', length: 3}
```

```js
let skills = [
  { tech: 'HTML', level: 10 },
  { tech: 'CSS', level: 9 },
  { tech: 'JS', level: 8 },
  { tech: 'React', level: 9 },
  { tech: 'Redux', level: 10 },
  { tech: 'Node', level: 8 },
  { tech: 'MongoDB', level: 8 }
]

let skillJSON = JSON.stringify(skills)
localStorage.setItem('skills', skillJSON)
```

- LÆ°u trá»¯ má»™t Ä‘á»‘i tÆ°á»£ng trong localStorage. TrÆ°á»›c khi lÆ°u trá»¯ Ä‘á»‘i tÆ°á»£ng vÃ o localStorage, Ä‘á»‘i tÆ°á»£ng pháº£i Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh chuá»—i.

```js
const user = {
  firstName: 'Asabeneh',
  age: 250,
  skills: ['HTML', 'CSS', 'JS', 'React']
}

const userText = JSON.stringify(user, undefined, 4)
localStorage.setItem('user', userText)
```

### Láº¥y má»¥c tá»« localStorage

ChÃºng ta láº¥y dá»¯ liá»‡u tá»« bá»™ nhá»› cá»¥c bá»™ báº±ng phÆ°Æ¡ng thá»©c _localStorage.getItem()_.

```js
//cÃº phÃ¡p
localStorage.getItem('key')
```

```js
let firstName = localStorage.getItem('firstName')
let age = localStorage.getItem('age')
let skills = localStorage.getItem('skills')
console.log(firstName, age, skills)
```

```sh
 'Asabeneh', '200', '['HTML','CSS','JS','React']'
```

NhÆ° báº¡n cÃ³ thá»ƒ tháº¥y, ká»¹ nÄƒng Ä‘ang á»Ÿ Ä‘á»‹nh dáº¡ng chuá»—i. HÃ£y sá»­ dá»¥ng JSON.parse() Ä‘á»ƒ phÃ¢n tÃ­ch nÃ³ thÃ nh máº£ng bÃ¬nh thÆ°á»ng.

```js
let skills = localStorage.getItem('skills')
let skillsObj = JSON.parse(skills, undefined, 4)
console.log(skillsObj)
```

```sh
['HTML','CSS','JS','React']
``

`

### XÃ³a bá»™ nhá»› cá»¥c bá»™

PhÆ°Æ¡ng thá»©c clear sáº½ xÃ³a má»i thá»© Ä‘Æ°á»£c lÆ°u trá»¯ trong bá»™ nhá»› cá»¥c bá»™

```js
localStorage.clear()
```

BÃ¢y giá», báº¡n Ä‘Ã£ biáº¿t vá» Bá»™ Nhá»› Web vÃ  báº¡n biáº¿t cÃ¡ch lÆ°u trá»¯ dá»¯ liá»‡u nhá» trÃªn trÃ¬nh duyá»‡t cá»§a khÃ¡ch hÃ ng. Báº¡n Ä‘Ã£ tiáº¿n thÃªm 17 bÆ°á»›c trÃªn con Ä‘Æ°á»ng Ä‘áº¿n sá»± vÄ© Ä‘áº¡i. BÃ¢y giá» hÃ£y lÃ m má»™t sá»‘ bÃ i táº­p cho trÃ­ Ã³c vÃ  cÆ¡ báº¯p cá»§a báº¡n.